# 買い物リストアプリケーション仕様書

## 1. システム概要
ユーザが買い物リストを作成し、購入状況を管理するためのウェブアプリケーション。ブラウザ上で商品を登録し、購入済みの商品にはチェックマークを入れることで管理できる。

## 2. 技術スタック
### フロントエンド
- HTML5
- CSS3
- JavaScript (Vanilla JS)
- レスポンシブデザイン対応

### バックエンド
- Python (Flask)
- SQLite3

## 3. 機能要件

### 3.1 商品登録機能
- 商品名の入力フィールド（必須）
- 登録ボタン
- 入力バリデーション
  - 空文字チェック
  - 文字数制限（100文字以内）
  - 使用可能文字
    - 日本語（ひらがな、カタカナ、漢字）
    - 英数字
    - スペース
    - カンマ (,)
    - ピリオド (.)
    - ハイフン (-)
  - フロントエンドとバックエンドの両方でバリデーション実施

### 3.2 商品一覧表示機能
- 登録商品の一覧表示
- スクロール対応
- オプション：並び替え機能
- リストの最終更新日時の表示（YYYY-MM-DD HH:mm形式）

### 3.3 購入チェック機能
- 各商品に対するチェックボックス
- チェック済み商品のスタイル変更（取り消し線・背景色）
- チェック状態の切り替え機能

### 3.4 商品編集機能
- インライン編集機能
- 編集内容の確定・キャンセル
- 商品名の入力バリデーション（商品登録機能と同一のルール）

### 3.5 商品削除機能
- 削除ボタン
- 確認ダイアログ
- オプション：ゴミ箱/アーカイブ機能

### 3.6 データ永続化機能
- SQLiteデータベースでのデータ保存
- REST APIによるCRUD操作
- 全ての変更操作時に最終更新日時を自動更新

## 4. データモデル

### 4.1 Items（商品テーブル）
```sql
CREATE TABLE items (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    is_completed BOOLEAN DEFAULT 0,
    display_order INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## 5. API エンドポイント

### 5.1 商品管理
- GET /api/items - 商品一覧取得
- POST /api/items - 商品登録
- PUT /api/items/{id} - 商品情報更新
- DELETE /api/items/{id} - 商品削除
- PUT /api/items/{id}/toggle - 購入状態切り替え

## 6. 非機能要件

### 6.1 パフォーマンス
- 画面表示は1秒以内
- 効率的なクエリ設計

### 6.2 信頼性
- データベースの定期バックアップ
- エラー発生時の適切なエラーメッセージ表示

### 6.3 ユーザビリティ
- スマートフォン・タブレット対応のレスポンシブデザイン
- 直感的なUI/UX
- 文字の可読性への配慮

### 6.4 保守性
- MVCアーキテクチャの採用
- コードの適切なモジュール化
- 拡張性を考慮した設計

## 7. 画面設計

### 7.1 ホーム画面（メイン画面）
- ヘッダー
  - アプリケーションタイトル
  - 最終更新日時の表示
  - 新規商品追加ボタン
- メインコンテンツ
  - 商品一覧
    - 商品名
    - 購入チェックボックス
    - 編集ボタン
    - 削除ボタン

### 7.2 商品編集モーダル
- 商品名入力フィールド
- 保存ボタン
- キャンセルボタン

## 8. テスト要件

### 8.1 単体テスト
- 各APIエンドポイントのテスト
- バリデーション機能のテスト
  - 商品名の文字数制限（100文字以内）
  - 使用可能文字のチェック
    - 日本語文字
    - 英数字
    - 許可された記号（スペース、カンマ、ピリオド、ハイフン）
    - 禁止された特殊文字
  - 空文字チェック
  - フロントエンドとバックエンドの両方でのバリデーション
- データベース操作のテスト

### 8.2 UI/UXテスト
- レスポンシブデザインの動作確認
- 各種ブラウザでの表示確認
- モバイルデバイスでの操作性確認
